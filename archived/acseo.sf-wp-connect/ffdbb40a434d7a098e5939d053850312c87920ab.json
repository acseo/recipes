{
    "manifests": {
        "acseo/sf-wp-connect": {
            "manifest": {
                "env": {
                    "API_WP_TOKEN": "%generate(secret)%"
                },
                "copy-from-package": {
                    "config/": "%CONFIG_DIR%/",
                    "src/": "%SRC_DIR%/"
                },
                "post-install-output": [
                    "<fg=blue>C'est presque pr\u00eat !</>",
                    "",
                    "<question>Il ne reste plus que quelques lignes \u00e0 ajouter au fichier <comment>config/packages/security.yaml</comment> :</question>",
                    "",
                    "<fg=cyan>security</>:",
                    "    <fg=cyan>providers</>:",
                    "        <fg=cyan>api_wp_provider</>:",
                    "            <fg=cyan>memory</>:",
                    "                <fg=cyan>users</>:",
                    "                    <fg=cyan>api_wp</>: { <fg=cyan>roles</>: [<fg=yellow>'ROLE_API_WP'</>] }",
                    "",
                    "    <fg=cyan>firewalls</>:",
                    "        <fg=grey># \u00c0 placer en tout premier</>",
                    "        <fg=cyan>api_wp</>:",
                    "            <fg=cyan>pattern</>: ^/api/wp/",
                    "            <fg=cyan>stateless</>: <fg=red>true</>",
                    "            <fg=cyan>provider</>: api_wp_provider",
                    "            <fg=cyan>custom_authenticator</>: App\\ApiWp\\Security\\TokenAuthenticator",
                    "",
                    "    <fg=cyan>access_control</>:",
                    "        <fg=grey># \u00c0 placer en tout premier</>",
                    "        - { <fg=cyan>path</>: ^/api/wp, <fg=cyan>roles</>: ROLE_API_WP }",
                    "",
                    "<fg=blue>Vous pouvez maintenant :</>",
                    "  1. D\u00e9velopper vos routes d'API dans le dossier <comment>src/ApiWP/Controller</comment>",
                    "  2. Mettre en place la variable d'environnement <comment>WP_API_TOKEN</comment> sur vos diff\u00e9rents environnements (fichier d'env enregistr\u00e9s sur GitLab pour la CI, fichier .env du serveur de prod, etc...)",
                    "  3. Faire vos appels aux API mises en place en envoyant un header X-AUTH-TOKEN avec la valeur du token <comment>WP_API_TOKEN</comment> indiqu\u00e9 dans le <comment>.env</comment>"
                ]
            },
            "files": [],
            "ref": "ffdbb40a434d7a098e5939d053850312c87920ab"
        }
    }
}
